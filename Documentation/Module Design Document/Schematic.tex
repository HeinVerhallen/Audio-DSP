The electrical diagram of the audio DSP is divided into multiple separate diagrams to allow for the electronics to be divided into different modules. For this purpose, most voltage regulators have their own schematic, enabling them to be placed as vertical riser boards on the main board. This minimizes the risk and allows for separate testing of these voltage regulators. Custom symbols and footprints have been created in KiCAD for all these voltage regulators, so they can be used on the main board as if they were off-the-shelf components. Additionally, this saves space by better utilizing the vertical space of the product.

\subsubsection{Buck converter}
The following text relates to the schematic displayed in appendix \ref{Appendix_buck_schematic}.

The buck converters are based around the MAX17634C IC from Maxim Integrated. This IC was chosen due to its attractive price, excellent performance as indicated by the datasheet, availability, and small footprint.

The schematic is designed in such a way that the different buck converters for the required voltages can utilize the same circuitry. In this approach, all components are chosen based on the worst-case scenario. For example, one buck converter may require a larger inductor, while another may need more output capacitance. By selecting larger footprints based on the worst-case scenario for all components, all buck converters on the PCB utilize the exact same design.

The calculations made for the buck converters can be found in appendix \ref{Appendix_buck_calculations}.

\subsubsection{Single-ended primary-inductor converter}
The following text relates to the schematic displayed in appendix \ref{Appendix_SEPIC_schematic}.

A SEPIC (Single-ended primary-inductor converter) is based on the LT3579 from Analog Devices. This choice was primarily made due to its availability and relatively high allowable voltage drop of 40V between the input and output. The relatively high allowable voltage drop is crucial because the SEPIC is used to generate a negative voltage, and the voltage drop encompasses the input voltage plus the output voltage. Many of the available SEPIC controllers had a maximum allowable voltage drop of 30V or less, which is too tight for this application as it leaves virtually no margin.

The calculations made for the SEPIC can be found in appendix \ref{Appendix_SEPIC_calculations}

\subsubsection{Discrete low noise linear regulator}
The following text relates to the schematic displayed in appendix \ref{Appendix_lin_schematic}.

The discrete low-noise linear regulator is symmetrically constructed, and thus only one half is described. Firstly, the regulator consists of a capacitance multiplier. Effectively, this circuit behaves like an RC low-pass filter, where the capacitance of the capacitor is determined by the capacitance at the base of the transistor multiplied by the hFE (current gain) of the transistor. This allows for achieving a very low corner frequency without using high resistance values or very large and expensive capacitors. Both options are undesirable due to either the maximum current or the price and size considerations.


The cutoff frequency of a standard RC filter can be calculated as shown in \ref{eq:fc_RC}.
\begin{equation}
    fc=\frac{1}{2 \pi R C}
    \label{eq:fc_RC}
\end{equation}

The cutoff frequency of the capacitance multiplier can be calculated as shown in \ref{eq:fc_cap_mul}:
\begin{equation}
    fc=\frac{1}{2 \pi R C \beta}
    \label{eq:fc_cap_mul}
\end{equation}

\subsubsection{Main board}
The following text relates to the schematic displayed in appendix \ref{Appendix_main_schematic}.

The main board is based on the block diagram shown in Figure \ref{fig:arch-front-end} and is subdivided into multiple pages to keep the schematic organized and readable. The ADCs have their own page for every two channels, the DACs have their own page for every two channels, there is a page dedicated to the power supplies, and last but not least, there is a page for the connections to the FPGA board.

The front-end of channels 1 and 2 consists of an input selection relay followed by a LPF (low-pass filter) to suppress RF (radio frequency) interference. The inputs are equipped with TVS diodes for ESD protection. Next in line is the PGA2311P volume controller, which independently adjusts the volume of both inputs based on volume settings obtained via I2C from the FPGA. Since the PGA2311P operates on 5V logic while the FPGA operates around 3.3V logic, a TXS0102 level translator is placed in between. This is a bidirectional level translator as the I2C protocol transmits data bidirectionally. Some additional logic is implemented around this chip to ensure proper startup.

The outputs of the volume controller are fed into an LM4562 buffer OpAmp to ensure that the subsequent differential LPF is not affected by the undefined output impedance of the PGA2311P volume controller. This impedance can be approximated based on the maximum output current of the IC, but it does not guarantee that the signal still meets the low-noise specification of the IC.

The balanced LPF is built around the OPA1632 FDA (fully differential amplifier). It is a second-order LPF that simultaneously provides an offset voltage to the output voltage, which is supplied by the PCM1804 ADC. The signal is then filtered by an RC filter and buffered by an LM4562 OpAmp.

The outputs of the PGA2311P are also simultaneously tapped for the VU metering, which each consist of a precision rectifier and four comparators.

The ADC is equipped with EMI reduction resistors to limit the noise caused by the relatively high dv/dt of the I2S bus.


Furthermore, the entire analog section of the main board schematic is implemented differentially. This has been achieved, where necessary, by placing 0-ohm resistors to strategically connect the signals to ground, allowing the differential amplifiers to ensure that the voltages at desired locations are precisely as intended. 
This reduces the sensitivity of the circuits to noise and ground loops significantly.

The front-end of channels 3 and 4 resembles that of channels 1 and 2 but does not include the selection relay and volume controller. Additionally, this entire page is balanced, allowing these two inputs to achieve the best specifications.



The FPGA page consists solely of the two GPIO connectors of the DE1-SOC board and all the connections to and from them.

The power supplies page consists of all the power supply modules previously described in this section. The supply rails are equipped with test points to facilitate the qualification of the board.