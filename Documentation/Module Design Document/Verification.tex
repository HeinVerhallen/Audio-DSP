\section{Method}
Time has not yet allowed for the creation of a neat and detailed test plan. However, before the voltage regulator boards are soldered onto the main board, they need to be thoroughly tested to verify their functionality. The plan is to create a test table for this purpose, similar to the specification of ICs in datasheets.

\subsection{Hardware}
\subsubsection{Voltage regulators}
For the voltage regulator modules, the following parameters need to be measured to demonstrate proper operation:
-Thorough visual inspection, especially focusing on the soldering process. This includes checking for short circuits, open connections, solder balls, and other defects.
-The converter should be powered from a lab power supply with low current limit settings. In case of a short circuit or other module defect, the dissipated power will be limited, allowing for the identification and resolution of the issue.
-The output voltage of the converter should be observed using an oscilloscope. Attention should be paid to the absolute accuracy and the amplitude of the ripple voltage.
-The temperature of the PCBA should be monitored to ensure that the module does not get too hot, which could potentially shorten its lifespan.

\subsubsection{Main board}
The functionality of the main board should be verified in the following manner:
-Perform a thorough visual inspection, with a focus on the soldering process. Check for short circuits, open connections, solder balls, and other defects.
-Power the main board from a lab power supply with low current limit settings. This will limit the dissipated power in case of a short circuit or module defect, enabling identification and resolution of the issue. A thermal camera can be used to inspect the PCBA for hotspots.
-Verify the presence and correctness of all power rails.
-Verify that the output of the GPIO pins corresponds to the desired outcome.(e.g. check the SLCK).
-Next, apply a known signal (e.g., a 1kHz sinusoidal waveform with an amplitude of 100mV) to the various inputs of the audio-DSP. If no filters are selected and the audio-DSP is essentially in a pass-through state, the same signal should appear on the selected outputs. The accuracy of this signal can be verified using an audio analyzer such as the AP SYS 2700.

\subsection{Firmware}
The firmware can be tested by simulating the VHDL code in Modelsim. For this .do files are made to force input signals. Due to time constrains only the I2S decoder and encoder have been tested with real audio. 

\subsubsection{I2S decoder and encoder}
For testing the I2S decoder and encoder, they are wired in series. So when a random data pattern is going in the decoder the encoder should output the same data pattern.

\subsubsection{I2C master}
The I2C master is tested by simply writing and reading data with the protocol and verifying that the protocol works correctly according to the I2C protocol standards. 

\subsubsection{State-space BPF}
The state-space BPF is tested by inputting a sine wave outputted from a sine wave generator. By using a sine wave as an input it is very easy to expect the outcome. For instance when having the BPF resonance frequency at 1kHz and inputting a 1kHz sine wave, it is expected that the output sine wave has the same amplitude compared to the input sine wave. And when the frequency of the input sine wave does not match that of the BPF resonance frequency, it will be attenuated. 

The best way to check if the band-pass filter works is by changing the frequency of the input sine wave over time to create a kind of frequency spectrum of the band-pass filter response. 

\subsubsection{Effects}
All the effects are tested by inputting a sine wave to the effect and looking at the result. This approach with a simple sine wave input is chosen because with a sine wave input it is very simple to predict the outcome of the effect and then confirm if it works as expected.

\section{Results}

\subsection{Hardware}




\subsubsection{Main board}
\subparagraph{Inspection} Before connecting every module together and placing every component on the main board it is indeed ascertain that the board has flux and solder paste residue together with solder balls that can cause short circuits, therefore the PCBA will be cleaned in the ultrasonic bath, before doing this it is important to know which components are suitable for this. The relays and electrolytic capacitors are not suitable for this, therefore they are soldered after cleaning.  visual inspection has been done on the main board and the power delivery modules. In the second visual inspection there are no signs of shorts and the components are connected properly.
\subparagraph{Visual inspection} 

Before connecting every module together and placing every component on the main board it is indeed ascertain that the board has flux and solder paste residue together with solder balls that can cause short circuits, therefore the PCBA will be cleaned in the ultrasonic bath, before doing this it is important to know which components are suitable for this. The relays and electrolytic capacitors are not suitable for this, therefore they are soldered after cleaning.  visual inspection has been done on the main board and the power delivery modules. In the second visual inspection there are no signs of shorts and the components are connected properly.

\subparagraph{Vertical riser board}
The vertical riser boards have to be tested before placing it on the main board. These have been tested individually on ripple(not for the linear regulators, no equipment available to measure), output voltage and temperature. See \ref{Appendix-Vertical riser boards} Vertical riser boards in chapter \ref{chap:Appendix-Verification} verification for the outcomes.  \subparagraph{SEPIC} For the SEPIC the output ripple is ~5mV and output is -15.11V which is within specs, the temperature is 70째C at 1A which is feasible but if there is more power required an extra fan can be attached to cool the converter more. 
\subparagraph{Buck converters} The buck converters(see \ref{pdf:5V Buck converter} 5V buck - \ref{pdf:15V Buck converter} 15V buck) in the beginning all had an output of ~1v. This was because the feedback resistors were exchanged together. Therefore they had to be exchanged again and the problem is solved. The output voltage of all the buck converters are within spec. The ripple is ~8-10mV which is also within spec range. The temperature of all the buck converters are below 45째C at 1A. 
\subparagraph{Linear voltage regulators} After performing several simulations in LTspice, it was suspected that the LEDs, which serve as low-noise voltage references, might have been soldered incorrectly. However, after consulting the datasheet again with several group members, it was confirmed that the LEDs were indeed soldered correctly according to the datasheet.

Since no other plausible causes emerged after further investigation, it was decided to desolder one of the LEDs and measure it out of circuit using a multimeter to determine its polarity and threshold voltage. To the astonishment of the group, it was discovered that the Broadcom datasheet for the HSMH-C170 LED did not match the LEDs actually supplied. The polarity marking in the datasheet was the exact opposite of the actual component. It is unknown whether an incorrect batch was delivered or if the datasheet itself is genuinely incorrect.
%https://nl.mouser.com/datasheet/2/678/AV02_0551EN_DS_HSMx_Cxxx_25Mar2022-1827675.pdf
The output of the linear regulators (see \ref{pdf:12V linear regulator-1}12V lin reg up and till \ref{pdf:5V linear regulator-2}5V lin reg) are within specs and the temperature is 80째C at 1A, they won't be conducting more current than that so the temp is within spec range.

\paragraph{Main board power}
The PCBA is inspected and no short circuit is detected. The next step is to check all the power modules within the PCBA with current limiting, so that the board will not be catch on fire if there is still somehow a short. This has been done with a lab bench power supply limited to 1A. All the power rails are tested and every power delivery module is working properly at the desired voltage. The 12V buck converter that is going to the FPGA is tested separately first with four 33 resistors connected in parallel which will give 1.5A of current at 12V. The buck is still below 50째C. Therefore it is safe to power the fpga with the 12V buck converter

\paragraph{FPGA GPIO}
After doing visual inspection and vertical riser board inspection, it is safe to connect the fpga with the main board using flat cables. Unfortunately after connecting the the main board with the fpga it is stated that it didn't work after connecting the laptop using an RCA-cable to the audio dsp. The first thing that has been checked is the output of the clock going to the mainboard from the fpga. Doing so it has been identified that indeed the clock was not being transmitted correctly via the gpio pins of the DE1-SOC. In figure \ref{fig:Appendix-24.576MHz clock output} 24.576MHz clock output it is clearly visible that the 24.567MHz signal is clearly filtered due to parasitic capacitances in the signal path. Those effecting the paths are the following components Mosfets, diodes and the 47 ohm resistor at the GPIO pins. In figure \ref{fig:Appendix-50MHz clock output} 50MHz clock output is visible that the signal is even more weakened which makes it evident it is due to parasitic capacitances. In figure \ref{fig:Appendix-1MHz clock output} 1MHz clock output it is visible that the rising edge of the clock is already behaving capacitive. To be sure that the underlying issue is on all boards and not specifically on this board we have tested the clock output on another board and unfortunately the outcome is the same.

\subsection{Firmware}
\subsubsection{I2S encoder and decoder}
The results of this test can be found in figure \ref{fig:sim_result_i2s_dec_enc}. These results show that the I2S encoder and decoder work as expected. 

\subsubsection{I2C master}
The results can be seen in figure \ref{fig:sim_result_i2c-master}. In this result it can be seen that the I2C master works as expected according to the protocol standards.

\subsubsection{State-space BPF}
For testing the state-space BPF it is very easy to see if it works by checking the frequency response. For the test a resonance frequency for BPF of 400Hz is chosen. Then the sine wave changes its frequency every 10ms. The frequency start at 25Hz and steps up in octaves. The end frequency is 51200Hz as this is far beyond the range of the sampling frequency. The result of this test is seen in \nameref{chap:appendix-G-simulation-results}. 

As expected, the amplitude of the sine wave at the matching resonance frequency of 400Hz is equal to the input amplitude. And when the frequency goes an octave lesser or higher in frequency the amplitude is $\frac{\sqrt{2}}{2}$ times the input amplitude (-3dB). This is a result that is expected from a BPF, therefore it is shown that the BPF works in simulation.

\subsubsection{Effects}
\paragraph{Volume control}


\section{Conclusions}
\subsection{Hardware}

\subsubsection{Main board}
The working of the main board has been verified and works. All the local voltages have been checked and now short is found. To see if the board fully works according to specification some firmware still needs to be implemented. Some IC's still have to be setup to check if they work.
\subsubsection{SEPIC}
The SEPIC appears to be functioning well after some quick measurements. With an input voltage of +12V, it generates a stable -15V output voltage, and the voltage ripple remains nearly constant regardless of the output current. This aligns with the calculations and simulations. Additionally, the amplitude of the output ripple voltage closely matches the calculated and simulated values.

\subsubsection{Linear voltage regulator}
The linear voltage regulator appears to be functioning as intended, the 5V regulators powered by the +8V input of the buck converter, the +12V linear regulators are powered by +-15V buck converters and have all the desired output voltage. These are:
 
All of these linear regulators have been tested and verified. This can be viewed in \ref{Appendix-Vertical riser boards} Vertical riser boards. The voltages and temperatures are well within desired specs. The output ripple is not measurable with the equipment we have on school so these cannot be verified.

\subsubsection{Buck converters}
The buck converters appears to be functioning as intended, all of the buck converters are powered by the +24V input of the power supply and have all the desired output voltage. These are:
\begin{itemize}
\item 5V buck converter
\item 8V buck converter
\item 2x 12V buck converter
\item 15V buck converter
\end{itemize}  
All of these buck converters have been tested and verified. This can be viewed in \ref{Appendix-Vertical riser boards} Vertical riser boards. The voltages and temperatures are well within desired specs. The output ripple is ~8-10mV respectivly which is very close to what the datasheet has provided. 

\subsubsection{Main board}
The board cannot be tested further than the power supplies, because the clock is not giving the desired output. This gives a bottleneck to test all the other components and IC's.

\subsection{Firmware}
The I2S decoder, I2S encoder and I2C master work as expected. Therefore it is possible to sample audio using the ADC and DAC of the FPGA board. This has been tested and verified that this works. 

Due to time constrains further testing and implementation of the effects has not been conducted. 
